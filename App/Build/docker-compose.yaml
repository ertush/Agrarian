version: "2.0"

networks:
  node-red-net:
    driver: bridge 

services:
  node-red-backend:
    container_name: node-red-agrarian
    hostname: node-red-agrarian
    build: ./agrarian/build 
    networks: 
        - node-red-net
    volumes:
        - ./agrarian/build/node-red-data:/root/.node-red
    ports: 
        - 1880:1880
  
    
  mosquitto-broker:
    container_name: mosquitto-broker
    hostname: mqtt-broker
    build: ./mosquitto/build
    networks: 
        - node-red-net
    ports: 
        - 1883:1883
  
  mongo:
    container_name: mongo-db
    hostname: mongo
    image: mongo:latest
    command: mongod -auth --port 27017 -dbpath /data/db
    networks: 
        - node-red-net
    ports: 
        - 27017:27017
