<!-- Page Spinner -->
<app-page-spinner *ngIf="isLoading"></app-page-spinner>
<!-- End of page spinner -->
<div *ngIf="!isLoading && error.length > 0">
    <img class="center" src="../../assets/noConnection.png">
</div>
<div *ngIf="!isLoading">
    <div class="row"> 
        <div class="col-sm">    
            <h4>Settings</h4>
            <p class="h2">@{{user.displayName ? user.displayName : user.email.split('@')[0]}}</p>
        </div>
        <div class="col-sm text-sm-right">
            <button kendoRippleContainer class="k-button k-shadow ag-theme-btn" (mousedown)="onSignOutClick()">Sign out</button>
        </div>
    </div>

    <div class="row">
        <div class="col-md-7">

            <div class="k-card" id="profile">
                <h3 class="k-card-header">Public Profile</h3>
                <div class="k-card-body">

                    <div class="row">
                        <div class="col-md-3 text-xs-center user-profile-cnt">
                                
                          <app-user-avatar [user]="user"></app-user-avatar>

                            <div class="row text-center m-1 social-links">
                                    <ul class="p-1 pt-4" style="
                                        list-style: none; 
                                        flex-flow: column nowrap;
                                        justify-content: space-evenly;
                                        align-items: flex-start;
                                        display: flex;
                                        ">
                                        <li style="flex: 1" class="mb-4">
                                            <i class="fab fa-twitter" style="font-size:15px; color: rgb(88, 208, 255)"></i>
                                            <span class="ml-1">@twitter</span>
                                        </li>
                                        <li style="flex: 1" class="mb-4">
                                            <i class="fab fa-facebook" style="font-size:15px; color: rgb(88, 119, 255)"></i>
                                            <span class="ml-1">@facebook</span>
                                        </li>
                                        <li style="flex: 1" class="mb-4">
                                            <i class="fab fa-google-plus" style="font-size:15px; color: rgb(255, 88, 88)"></i>
                                            <span class="ml-1">@google+</span>
                                        </li>
                                        <li style="flex: 1" class="mb-4">
                                            <i class="fas fa-phone-alt" style="font-size:15px; color: rgb(93, 91, 91)"></i>
                                            <span class="ml-1">{{ user.phoneNumber  || '000-000' }}</span>
                                        </li>
                                    </ul>
                            </div>
                            
                        </div>
                        <div class="col-md-9">
                            <div class="form-group">
                                <kendo-textbox-container class="custom-width" floatingLabel="Username">
                                    <input kendoTextBox type="text" id="username" 
                                    [value]="user.displayName ? user.displayName : user.email.split('@')[0]" />
                                    <label for="username" style="display: none;"></label>
                                </kendo-textbox-container>
                            </div>
                            <div class="form-group">
                                <kendo-textbox-container class="custom-width" floatingLabel="Email">
                                    <input kendoTextBox type="email" id="email" [value]="user.email" />
                                    <label for="email" style="display: none;"></label>
                                </kendo-textbox-container>
                            </div>
                            <div class="form-group" kendoRippleContainer>
                                    <input type="checkbox" id="chkboxonly" class="k-checkbox k-prm" checked />
                                    <label class="k-checkbox-label" for="chkboxonly">Keep my email address private</label>
                            </div>
                            <div class="form-group">
                                <kendo-textbox-container class="custom-width" floatingLabel="Company">
                                    <input kendoTextBox type="text" id="company" [value]="user.company" />
                                    <label for="company" style="display: none;"></label>
                                </kendo-textbox-container>
                            </div>
                            <div class="form-group">
                                <kendo-textbox-container class="custom-width" floatingLabel="Location">
                                    <input kendoTextBox type="text" id="location" [value]="user.location" />
                                    <label for="location" style="display: none;"></label>
                                </kendo-textbox-container>
                            </div>
                            <div class="form-group v-spacer">
                                <button kendoRippleContainer class="k-button k-shadow ag-theme-btn" (mousedown)="onUpdateClick()">Update profile</button>
                            </div>
                        </div>  
                    </div>
                </div>
            </div>

            <div class="k-card" id="delete-account">
                <h3 class="k-card-header">Delete Account</h3>
                <div class="k-card-body">
                    <p>You will immediately lose access to your reports and all other information associated with your account. <strong>This cannot be undone!</strong></p>
                    <div class="v-spacer">
                        <button kendoRippleContainer class="k-button delete-btn k-shadow" style="background-color: red; color: whitesmoke; border-radius: 0.5rem;" (mousedown)="onDeleteClick()">Delete Account</button>
                    </div>
                </div>
                
            </div>
        </div>
        <div class="col-md-5">

            <div class="k-card" id="notifications">
                <h3 class="k-card-header">Notifications</h3>
                <div class="k-card-body">
                    <h4 class="h6">Automatically watch repositories?</h4>
                    <p class="text-muted">When you are given push access to a repository, automatically receive notifications for it.</p>
                    <p><kendo-switch></kendo-switch></p>
                    <h4 class="h6">Receive updates to any conversations via email?</h4>
                    <p><kendo-switch [checked]="true"></kendo-switch></p>
                    <h4 class="h6" >Receive updates to any repositories via email?</h4>
                    <p><kendo-switch [checked]="true"></kendo-switch></p>
                </div>
            </div>
            <div class="k-card" id="password">
                <h3 class="k-card-header">Update password</h3>
                <div class="k-card-body">
                    <div class="form-group">
                        <kendo-textbox-container class="custom-width" floatingLabel="Old password">
                            <input kendoTextBox id="oldPasswd" type="password" />
                            <label for="oldPasswd" style="display: none;"></label>
                        </kendo-textbox-container>
                    </div>
                    <div class="form-group">
                        <kendo-textbox-container class="custom-width" floatingLabel="New password">
                            <input kendoTextBox id="passwd" type="password" />
                            <label for="passwd" style="display: none;"></label>
                        </kendo-textbox-container>
                    </div>
                    <div class="form-group">
                        <kendo-textbox-container class="custom-width" floatingLabel="Confirm password">
                            <input kendoTextBox id="confirmPasswd" type="password" />
                            <label for="confirmPasswd" style="display: none;"></label>
                        </kendo-textbox-container>
                    </div>
                    <div class="form-group v-spacer">
                        <button kendoRippleContainer class="k-button k-shadow ag-theme-btn">Change password</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <kendo-dialog title="Thank you" *ngIf="profileDialogVisible" (close)="onProfileDialogClose()">
        <p>Your profile has been successfully updated</p>
        <kendo-dialog-actions>
            <button kendoRippleContainer class="k-button k-shadow ag-theme-btn" (mousedown)="onProfileDialogClose()">OK</button>
        </kendo-dialog-actions>
    </kendo-dialog>

    <kendo-dialog style="border-radius: 1.5rem;" *ngIf="deleteDialogVisible" (close)="onDeleteDialogClose()">
        <div class="row ml-1 mr-1 text-center"><h3>Are you sure you want to proceed?</h3></div>
        <div class="row m-1 text-center">
        <span style="
        background: rgb(253, 185, 185); 
        border-radius: 0.5rem; 
        padding: 0.8rem;
        color: #ce4e18">Account deletetion cannot be undone!</span>
        </div>
        <div class="row m-1 mb-2 text-center">
        <kendo-textbox-container floatingLabel="Enter email to confirm">
            <kendo-textbox #confirmDelete style="font-size:15px; color: red;"></kendo-textbox>
        </kendo-textbox-container>
        </div>
        <kendo-dialog-actions>
            <button class="delete-btn" kendoRippleContainer kendoButton (mousedown)="onDeleteDialogClose()">Cancel</button>
            <button class="delete-btn" kendoRippleContainer kendoButton [disabled]="!confirmDelete.value" (mousedown)="onDeleteDialogClose()" [primary]="true" style="background-color: red; color: whitesmoke;">Delete Account</button>
        </kendo-dialog-actions>
    </kendo-dialog>

</div>
