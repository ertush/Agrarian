<div class="row">
    <div id="top-bar" class="top-bar sticky-top bg-white d-xl-none " [ngClass]="{'k-shadow': navState === 'collapsed'}" *ngIf="showNav() && navState === 'collapsed' && isMobile">
        <span id="nav-toggle" class="nav-toggle d-xl-none"
            (mousedown)="toggleNav()"> 

            <div *ngIf="navState === 'collapsed'" class="app-bar-title">
                
                <div class="title-bar-header">
                    <span class="user-wrapper">
                        <div class="avatar">
                            <img *ngIf="user.photoURL !== null; else userInitialAvatar" [src]="user.photoURL" class="img-circle mx-auto" style="max-width: 30px"/>
                            <ng-template #userInitialAvatar>
                                <div class="initials-avatar mx-auto" style="width: 30px !important; height: 30px !important">
                                    <p style="font-size: 15px !important; padding-top: 1rem !important">{{user.displayName ? user.displayName.substr(0,2) : user.email.split('@')[0].substr(0,2)}}</p>
                                </div>
                            </ng-template>
                            
                        </div>
                        <p class="h5 ml-1">@{{ (user.displayName ? user.displayName : user.email.split('@')[0]).replace(' ','') }}</p>
                    </span>

                    <p id="app-title" class="menu-title h5">{{ menuTitle }}</p>
                    
                    <span [ngStyle]="{'background': 1 === 1 ? '#ce4e18' : '$primary'}" class="h5 status-badge text-center">offline</span>
                </div>  
                
            </div>

        </span>
    </div>
    <div id="nav"
        class="sticky-top py-1 py-sm-3 k-vbox shadow col-xl-2 d-xl-flex hide container-items"
        [@toggleNav]="navState"
        *ngIf="showNav()"  
        >
       
        <div class="container mt-0">
            <div *ngIf="navState === 'expanded' && isMobile" class="mt-3 mr-0" style="float: right;">
                <i  class="k-icon k-i-close" (mousedown)="toggleNav()"></i>
            </div> 
          <h1 id="app-title" class="mb-0 mt-0" [ngClass]="{'pt-3': isMobile}" >Agrarian</h1>
          <p id="app-subtitle" class="h4 mb-3">{{ menuTitle }}</p>
        
            <app-user-avatar [user]="user"></app-user-avatar>
          
          <p class="h4 mt-2">Menu</p>
          <ul class="nav nav-pills flex-column">
              <li class="nav-item" id="dashbaord">
                  <a [routerLink]=" ['./dashboard'] "  class="nav-link mt-1" (mousedown)="navigate('/dashboard')" routerLinkActive="active">
                    <i class="k-icon k-i-graph k-icon-sm" routerLinkActive="active"></i>Dashboard</a>
              </li>
              <li class="nav-item" id="issues">
                  <a [routerLink]=" ['./issues'] " class="nav-link mt-1" (mousedown)="navigate('/issues')" routerLinkActive="active">
                    <i class="k-icon k-i-subreport k-icon-sm" routerLinkActive="active"></i>Reports</a>
              </li>
          </ul>
          
          <p class="h4 mt-1">Account</p>
          <ul class="nav nav-pills flex-column">
              <li class="nav-item" id="profile">
                  <a [routerLink]=" ['./profile'] "  class="nav-link mt-1" (mousedown)="navigate('/profile')" routerLinkActive="active">
                    <i class="k-icon k-i-user k-icon-sm" routerLinkActive="active"></i>My Profile</a>
              </li>
              <li class="nav-item" id="signout">
                  <a class="nav-link mt-1" style="cursor: pointer;" (mousedown)="logOut()" routerLinkActive="active">
                    <i class="k-icon k-i-logout k-icon-sm" routerLinkActive="active"></i>Log Out</a>
              </li>
          </ul>
          
          <p class="h4 mt-1">Resources</p>
          <ul class="nav nav-pills flex-column"> 
              <li class="nav-item" id="source">
                  <a class="nav-link mt-1" href="https://github.com/telerik/kendo-angular/tree/master/examples/projects/integration-pwa-material" target="_blank"
                      role="button">
                  <i class="k-icon k-i-download k-icon-sm"></i>Download</a>
              </li>
              <li class="nav-item" id="documentation">
                  <a class="nav-link mt-1" href="https://agrarian-iot.github.io" target="_blank"
                  role="button">
                  <i class="k-icon k-i-hyperlink-globe k-icon-sm"></i>Website</a>
              </li>
          </ul>
        </div>

        <div class="container mt-sm-auto" >
          
          <div id="copy">
              <p>Copyright &copy; {{year}},<br /><a href="https://eric-dev-me.vercel.app">Eric</a> and/or his subsidiaries or affiliates.</p>
              <p>All Rights Reserved.</p>
          </div>
        </div>

    </div>

    <main class="content-wrapper col">
        <router-outlet></router-outlet>
    </main>
</div>
